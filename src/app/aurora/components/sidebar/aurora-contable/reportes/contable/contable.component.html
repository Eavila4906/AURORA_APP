<section *ngIf="permission_read" class="me-3">
    <div class="mb-3">
        <h1 class="h3 d-inline align-middle">Reportes contable <i class="fas fa-coins"></i></h1>
    </div>

    <div class="row">
        <div class="col-12">
            <div class="card">
                <div class="card-body">
                    <form>
                        <div class="row">
                            <div class="col-lg-2 col-sm-2">
                                <div class="mb-3">
                                    <label>Fecha inicio</label>
                                    <input class="form-control" type="date" name="fechaInicio"
                                        [(ngModel)]="fechaInicio">
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-2">
                                <div class="mb-3">
                                    <label>Fecha fin</label>
                                    <input class="form-control" type="date" name="fechaFin" [(ngModel)]="fechaFin">
                                </div>
                            </div>
                            <div class="col-lg-2 col-sm-2">
                                <div class="mb-3">
                                    <label>Rango</label>
                                    <select class="form-control" name="tipoOp" [(ngModel)]="tipoOp">
                                        <option value="0" class="d-none" selected>Seleccionar</option>
                                        <option value="Dia">Día</option>
                                        <option value="Semana">Semana</option>
                                        <option value="Mes">Mes</option>
                                        <option value="Año">Año</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <button class="btn btn-success text-white" title="Generar" (click)="reporteContable()">
                            <i class="fas fa-search"></i>
                        </button>
                        
                        <button class="btn btn-warning ms-2" title="Limpiar" (click)="resetForm()">
                            <i class="fas fa-broom"></i>
                        </button>

                    </form>

                    <hr>

                    <div *ngIf="reportes">
                        <!-- Sección General -->
                        <div class="col-md-12 mb-3">
                            <div class="card text-center">
                                <div class="card-header bg-lightblue">
                                    <b>Reporte general de {{rango}}</b>
                                </div>
                            </div>
                        </div>
                        <div class="row mb-4">
                            <div class="col-md-4">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="fas fa-cash-register fa-2x"></i>
                                        <p class="mt-2">Ingresos: {{total_ingresos}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="fas fa-wallet fa-2x"></i>
                                        <p class="mt-2">Egresos: {{total_egresos}}</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card text-center">
                                    <div class="card-body">
                                        <i class="fas fa-dollar-sign fa-2x"></i>
                                        <p class="mt-2">Ganancias: {{total_ganancias}}</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Sección de Tarjetas Inferiores -->
                        <div class="col-md-12 mb-3">
                            <div class="card text-center">
                                <div class="card-header bg-lightblue">
                                    <b>Reportes detallados de {{rango}}</b>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-success text-white">
                                        <b>Ventas</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-shopping-cart fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_ventas}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_ventas}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-warning">
                                        <b>Compras</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-shopping-bag fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_compras}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_compras}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-success text-white">
                                        <b>Ventas pagadas</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-cash-register fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_ventasPagadas}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_ventasPagadas}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-warning">
                                        <b>Compras pagadas</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-shopping-basket fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_comprasPagadas}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_comprasPagadas}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-info text-white">
                                        <b>Cuentas por cobrar</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-clipboard-list fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_cuentasPorCobrar}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_cuentasPorCobrar}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4 mb-3">
                                <div class="card text-center">
                                    <div class="card-header bg-info text-white">
                                        <b>Cuentas por pagar</b>
                                    </div>
                                    <div class="card-body d-flex justify-content-between align-items-center">
                                        <div>
                                            <i class="fas fa-file-invoice fa-2x"></i>
                                            <p class="mt-2">Cantidad: {{cantidad_cuentasPorPagar}}</p>
                                        </div>
                                        <div>
                                            <i class="fas fa-dollar-sign fa-2x"></i>
                                            <p class="mt-2">Total: {{total_cuentasPorPagar}}</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</section>

<div *ngIf="permission_read == false">
    <div class="alert alert-danger" role="alert">
        Access denied! You do not have the necessary permissions to view this module.
    </div>
</div>